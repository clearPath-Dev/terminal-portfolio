@tailwind components;

@layer components {
  /* Base Terminal Structure */
  .terminal-window {
    @apply rounded-lg shadow-2xl overflow-hidden transition-all duration-300 relative;
    
    /* Use CSS variables for themeable properties */
    background: var(--terminal-bg, rgba(40, 42, 54, 0.95));
    border: var(--terminal-border, 2px solid #6b7280);
    color: var(--terminal-text, #f8f8f2);
    box-shadow: var(--terminal-shadow, 0 25px 50px -12px rgba(0, 0, 0, 0.25));
    font-family: var(--terminal-font)!important;
    min-height: 400px;
    max-height: 80vh;
  }

  .terminal-header {
    @apply px-4 py-2 flex items-center justify-between border-b;
    background: var(--titlebar-bg, #1f2937);
    border-bottom: var(--titlebar-border, 1px solid #6b7280);
    color: var(--titlebar-text, #f9fafb);
    font-family: var(--titlebar-font, inherit);
    font-weight: var(--titlebar-weight, 400);
    text-transform: var(--titlebar-transform, none);
    letter-spacing: var(--titlebar-spacing, normal);
  }

  .terminal-body {
    @apply p-4 h-full overflow-y-auto text-sm leading-relaxed;
    font-family: var(--terminal-font)!important;
    min-height: 350px;
    max-height: calc(80vh - 60px);
  }

  .terminal-body input {
    caret-color: var(--cursor-color, #50fa7b);
    color: var(--terminal-text);
    background: transparent;
  }

  .command-line {
    @apply flex items-center mb-2;
  }

  .prompt {
    @apply mr-2 font-semibold whitespace-nowrap;
    color: var(--prompt-color, #50fa7b);
    font-weight: var(--prompt-weight, 600);
  }

  .ghost-text {
    @apply inline-block text-gray-500 opacity-60 italic;
  }

  .command-output {
    @apply mb-4 pl-4 border-l-2;
    border-color: var(--output-border);
  }

  .command-history {
    @apply mb-4;
  }

  /* Window Controls */
  .window-controls {
    @apply flex gap-2 items-center;
  }

  .control-btn {
    @apply w-3 h-3 rounded-full cursor-pointer transition-all duration-200;
    display: block;
  }

  .close-btn { 
    background: #ff5f56; 
  }
  
  .minimize-btn { 
    background: #ffbd2e; 
  }
  
  .maximize-btn { 
    background: #27ca3f; 
  }

  .control-btn:hover {
    @apply scale-110;
    filter: brightness(1.2);
  }

  /* Background Effects Base */
  .matrix-rain {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 1;
    opacity: 0.6;
  }

  .matrix-char {
    position: absolute;
    color: var(--accent-green);
    font-family: 'Fira Code', monospace;
    animation: matrix-drop linear infinite;
  }

  /* Theme-specific styling overrides */
  .terminal-lcars {
    border-radius: 20px;
    backdrop-filter: blur(15px) saturate(200%);
  }

  .terminal-klingon {
    border-radius: 20px;
    backdrop-filter: blur(12px) saturate(150%);
  }

  .terminal-borg {
    border-radius: 20px;
    backdrop-filter: blur(12px) saturate(180%);
  }

  .terminal-matrix {
    border-radius: 8px;
  }

  .terminal-light {
    border-radius: 8px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  }
}

/* Core Animations */
@keyframes cursor-blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

@keyframes matrix-drop {
  0% { transform: translateY(-100vh); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(100vh); opacity: 0; }
}

/* Responsive Design */
@media (max-width: 768px) {
  .terminal-window {
    @apply m-2;
    height: calc(100vh - 20px) !important;
    max-height: none !important;
  }
  
  .terminal-body {
    @apply p-2 text-xs;
    min-height: calc(100vh - 100px);
    max-height: none;
  }
  
  .terminal-header {
    @apply px-2 py-1;
  }
  
  .control-btn {
    @apply w-2 h-2;
  }

  .prompt {
    @apply text-xs;
  }
}